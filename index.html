<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×××–× ×™ ×”×“×™×Ÿ - ×¤×“×™×•×Ÿ ×ª×¢× ×™×•×ª ×”××œ× (2026)</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&family=Frank+Ruhl+Libre:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --gold: #c5a059; --dark-bg: #020617; --danger-red: #ef4444; }
        
        body { 
            font-family: 'Assistant', sans-serif; 
            background-color: var(--dark-bg); 
            color: #f1f5f9; 
            margin: 0; padding: 10px; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* ×œ×”×‘×•×ª ×”×’×™×”× ×•× - ×××—×•×¨×™ ×”×ª×•×›×Ÿ */
        #hell-overlay {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 0%;
            background: linear-gradient(to top, #450a0a, #991b1b, #f97316, transparent);
            box-shadow: 0 0 100px rgba(127, 29, 29, 0.8);
            opacity: 0.9; pointer-events: none; z-index: 5; transition: height 1s ease;
        }

        .container { 
            position: relative; z-index: 100; max-width: 650px; margin: 10px auto;
            background: rgba(15, 23, 42, 0.97); padding: 20px; border-radius: 15px;
            border: 2px solid #1e293b; box-shadow: 0 0 30px rgba(0,0,0,1);
        }

        .promo-banner {
            background: linear-gradient(90deg, #d4af37, #b8860b);
            color: black; text-align: center; padding: 12px; font-weight: bold;
            border-radius: 8px; margin-bottom: 25px; font-size: 16px;
        }

        h1 { font-family: 'Frank Ruhl Libre', serif; text-align: center; color: var(--gold); font-size: 38px; margin: 0; }
        #soul-status { text-align: center; font-weight: bold; margin: 15px 0; font-size: 20px; transition: 0.3s; }

        .category-title { 
            color: var(--gold); border-bottom: 2px solid var(--gold); 
            margin: 30px 0 15px; padding-bottom: 5px; font-size: 22px; 
            font-family: 'Frank Ruhl Libre', serif; background: rgba(197, 160, 89, 0.1); padding: 5px 10px; 
        }

        .item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #1e293b; }
        
        .info-btn { 
            background: var(--gold); border: none; border-radius: 50%; width: 28px; height: 28px; 
            cursor: pointer; font-weight: bold; font-size: 16px; color: black; display: flex; align-items: center; justify-content: center;
        }

        .qty-controls { display: flex; align-items: center; gap: 15px; }
        .btn-qty { background: transparent; border: 1px solid var(--gold); color: var(--gold); width: 35px; height: 35px; cursor: pointer; font-size: 22px; }

        .footer-sticky { 
            position: sticky; bottom: 5px; background: #0f172a; padding: 15px; 
            border: 3px solid var(--gold); border-radius: 12px; margin-top: 30px;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; z-index: 500;
        }

        .falling-sin {
            position: fixed; top: -50px; font-size: 35px; z-index: 1000;
            pointer-events: none; animation: fall linear forwards;
            transform: translateZ(0);
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg) translateZ(0); } }

        #info-modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #1e293b; padding: 25px; border-radius: 15px; border: 3px solid var(--gold);
            z-index: 2000; width: 85%; text-align: center; box-shadow: 0 0 100px black;
        }

        #fireworks-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 10; }
        
        /* ×§×œ×£ ×œ×™×™×¦×•× */
        #export-source { position: absolute; left: -9999px; width: 500px; padding: 50px; background: #fdf6e3; color: #4a3728; font-family: 'Frank Ruhl Libre', serif; border: 20px solid #4a3728; text-align: center; }
    </style>
</head>
<body>

<div id="hell-overlay"></div>
<canvas id="fireworks-canvas"></canvas>

<audio id="fire-sound" loop><source src="https://www.soundjay.com/nature/sounds/fire-1.mp3" type="audio/mpeg"></audio>

<div class="container">
    <div class="promo-banner">âœ¨ ×§×•×¤×•×Ÿ ×œ×©× ×” ×”×—×“×©×”: <span style="text-decoration: underline;">HOLY2026</span> (20% ×”× ×—×”) âœ¨</div>
    
    <h1>×××–× ×™ ×”×“×™×Ÿ</h1>
    <div id="soul-status" style="color: #10b981;">âœ¨ × ×©××” ×˜×”×•×¨×”</div>
    <p style="text-align:center; font-size: 14px; opacity: 0.8;">×¤×“×™×•×Ÿ ×™×•× ×ª×¢× ×™×ª: 3 ×©"×—</p>

    <input type="text" id="user-name" placeholder="×©× ×”××‘×§×© ×œ×ª×¤×™×œ×”..." style="width:100%; padding:14px; background:#0f172a; border:1px solid #334155; color:white; border-radius:8px; margin-bottom: 15px; box-sizing: border-box; font-size: 16px;">

    <div id="sin-list"></div>

    <div class="footer-sticky">
        <div style="grid-column: span 2; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #334155; padding-bottom: 10px;">
            <input type="text" id="coupon-field" placeholder="×§×•×“ ×§×•×¤×•×Ÿ" oninput="calc()" style="width:40%; padding:10px; background:#1e293b; border:1px solid var(--gold); color:white; border-radius:5px;">
            <div style="text-align: left;">
                <span style="font-size:12px; opacity: 0.7;">×¡×š ×”×¤×“×™×•×Ÿ:</span><br>
                <span style="font-size:26px; font-weight:bold; color:var(--gold);">â‚ª<span id="price-val">0</span></span>
            </div>
        </div>
        <button onclick="shareAsImage()" style="background:#128c7e; color:white; padding:15px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; font-size: 16px;">×©×ª×£ ×ª××•× ×” ×‘-WhatsApp</button>
        <button onclick="pay()" style="background:var(--gold); color:black; padding:15px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; font-size: 16px;">×¢×‘×•×¨ ×œ×ª×©×œ×•× ×”×¤×“×™×•×Ÿ</button>
    </div>
</div>

<div id="info-modal">
    <h3 id="m-title" style="color:var(--gold); margin-top:0;"></h3>
    <p id="m-desc" style="font-size:16px; line-height:1.6;"></p>
    <button onclick="closeModal()" style="background:var(--gold); border:none; padding:10px 20px; cursor:pointer; font-weight:bold; border-radius:5px;">×¡×’×•×¨</button>
</div>

<div id="export-source">
    <h1 style="color:#4a3728; border-bottom: 3px solid #4a3728; padding-bottom: 10px;">×¡×“×¨ ×¤×“×™×•×Ÿ ×ª×¢× ×™×•×ª</h1>
    <p style="font-size:24px;"><strong>×œ×–×›×•×ª ×”××‘×§×©:</strong> <span id="exp-name"></span></p>
    <div id="exp-list" style="text-align:right; margin:20px 0; font-size:18px;"></div>
    <div style="background: #efe4c9; padding: 25px; border-radius: 12px; border: 2px solid #4a3728;">
        <h2 style="margin:0; color:#5d4037;">×¡×š ×”×›×œ ×œ×¤×“×™×•×Ÿ × ×¤×©: â‚ª<span id="exp-price">0</span></h2>
    </div>
    <p style="font-style:italic; font-size:20px; margin-top:25px;">"×™Ö°×”Ö´×™ ×¨Ö¸×¦×•Ö¹×Ÿ ×©Ö¶××™Ö°Ö¼×”Öµ× ×¤Ö´Ö¼×“Ö°×™×•Ö¹×Ÿ ×–Ö¶×” ×ªÖ·Ö¼×—Ö·×ª ×ªÖ·Ö¼×¢Ö²× Ö´×™Ö¼×•Ö¹×ªÖ·×™..."</p>
</div>

<script>
    const config = { 
        paymentUrl: "https://your-payment-link.com", // ×”×›× ×¡ ××ª ×”×§×™×©×•×¨ ×©×œ×š ×›××Ÿ
        couponCode: "HOLY2026", 
        discount: 0.20 
    };

    const categories = [
        { cat: "×¢×•×•× ×•×ª ×©×‘×™×Ÿ ××“× ×œ××§×•× (×”××¨\"×™)", items: [
            { n: "×. ×‘×™×˜×•×œ ××¦×•×•×ª ×¢×©×”", f: 61, d: "×‘×™×˜×•×œ ×§×¨×™××ª ×©××¢, ×ª×¤×™×œ×™×Ÿ, ×¦×™×¦×™×ª ××• ×¡×•×›×” ×”××’× ×™× ×¢×œ ×”××“×." },
            { n: "×‘. ×—×˜× ×‘××—×©×‘×”", f: 87, d: "×”×¨×”×•×¨×™ ×¢×‘×™×¨×”, ×›×¤×™×¨×” ××• ×©× ××ª ×—×™× × ×”×¤×•×’××™× ×‘× ×©××”." },
            { n: "×’. ×™×™×Ÿ × ×¡×š", f: 73, d: "×©×ª×™×™×ª ×™×™×Ÿ ××’×¢ × ×›×¨×™ ×”××˜××˜× ××ª ×”×œ×‘." },
            { n: "×“. ×”× ×•×“×¨ ×•×œ× ××§×™×™×", f: 6, d: "××™ ×¢××™×“×” ×‘×”×‘×˜×—×” ×©× ×™×ª× ×” ×‘×¤×”." },
            { n: "×”. ×”× ×©×‘×¢ ×œ×©×§×¨", f: 37, d: "×—×™×œ×•×œ ×©× ×©××™×™× ×‘×©×‘×•×¢×ª ×©×•×•×." },
            { n: "×•. ×”×—×•×˜× ×‘×’××•×•×”", f: 55, d: "×”×’××•×•×” × ×—×©×‘×ª ×œ×©×•×¨×© ×›×œ ×”×¢×•×•× ×•×ª." },
            { n: "×–. ×¤×’× ×›×™×‘×•×“ ××‘ ×•××", f: 26, d: "×–×œ×–×•×œ ×‘×›×‘×•×“ ×”×”×•×¨×™×." },
            { n: "×—. ×”××§×œ×œ ××‘×™×• ×•×××•", f: 40, d: "×¢×‘×™×¨×” ×©×—×™×•×‘×” ×—××•×¨ ×××•×“ ××Ÿ ×”×ª×•×¨×”." },
            { n: "×˜. ×¤×’× ×‘××•×¨× ×”×•×¨×™×", f: 45, d: "××™ ×©××™×¨×” ×¢×œ ×™×¨××ª ×”×›×‘×•×“ ××”×”×•×¨×™×." },
            { n: "×™. ×”×—×•×˜× ×‘×›×¢×¡", f: 151, d: "×”×›×•×¢×¡ ×›××™×œ×• ×¢×•×‘×“ ×¢×‘×•×“×” ×–×¨×”." }
        ]},
        { cat: "×§×“×•×©×ª ×”×‘×¨×™×ª ×•×”×’×•×£", items: [
            { n: "×™×. ×ª×™×§×•×Ÿ ×›×œ×œ×™ (×“' ××™×ª×•×ª)", f: 200, d: "×¤×“×™×•×Ÿ ×›× ×’×“ ×—×™×•×‘×™ ××™×ª×•×ª ×‘×™×ª ×“×™×Ÿ." },
            { n: "×™×‘. ×”×•×¦××ª ×–×¨×¢ ×œ×‘×˜×œ×”", f: 84, d: "×¤×’× ×”×‘×¨×™×ª ×•×”×™×¡×•×“, ×©×•×¨×© ×›×œ ×”×ª×™×§×•× ×™×." },
            { n: "×™×’. ×”×‘×•×¢×œ × ×™×“×”", f: 82, d: "××™×¡×•×¨ ×›×¨×ª ×—××•×¨ ×‘×™×•×ª×¨." },
            { n: "×™×“. ×”×‘× ×¢×œ ×‘×”××”", f: 216, d: "×—×˜× ×”××•×¨×™×“ ××”×“×¨×’×” ×”×× ×•×©×™×ª." },
            { n: "×˜×•. ×”×‘× ×¢×œ ×”×’×•×™×”", f: 216, d: "×¤×’×™×¢×” ×‘×‘×¨×™×ª ×§×•×“×© ×¢× × ×›×¨×™×ª." },
            { n: "×˜×–. ×”×‘× ×¢×œ ×”×–×›×¨", f: 233, d: "××©×›×‘ ×–×›×¨." },
            { n: "×™×–. ××›×™×œ×ª × ×‘×œ×•×ª ×•×˜×¨×¤×•×ª", f: 87, d: "×˜×™××•× ×”×œ×‘ ×‘××›×™×œ×” ××¡×•×¨×”." },
            { n: "×™×—. ×××›×œ×•×ª ××¡×•×¨×™×", f: 91, d: "×˜×‘×œ, ×¢×¨×œ×” ×•×©×§×¦×™×." },
            { n: "×™×˜. ×”×‘× ×¢×œ ××©×ª ××™×©", f: 325, d: "×—×˜× ×—××•×¨ ×‘×§×“×•×©×ª ×”×‘×™×ª." },
            { n: "×›. ×”×›×•×ª×‘ ×§××™×¢×•×ª", f: 45, d: "×©×™××•×© ×‘×©××•×ª ×”×§×•×“×© ×©×œ× ×›×“×™×Ÿ." }
        ]},
        { cat: "×ª×™×§×•× ×™ ×”×¨×•×§×—", items: [
            { n: "×›×. ×”××œ×‘×™×Ÿ ×¤× ×™ ×—×‘×¨×•", f: 40, d: "×‘×™×•×© ××“× ×‘×¨×‘×™× × ×—×©×‘ ×›×©×¤×™×›×•×ª ×“××™×." },
            { n: "×›×‘. ×—×™×‘×•×§ ×•× ×™×©×•×§ × ×™×“×”", f: 40, d: "×§×¨×‘×” ×’×•×¤× ×™×ª ××¡×•×¨×” ××Ÿ ×”×“×™×Ÿ." },
            { n: "×›×’. ×’× ×™×‘×” ××• ×¨×™×‘×™×ª", f: 40, d: "×’×–×œ ×××•×Ÿ ××• ×”×œ×•×•××” ××¡×•×¨×”." },
            { n: "×›×“. ×œ×©×•×Ÿ ×”×¨×¢", f: 40, d: "×“×™×‘×•×¨ ×‘×’× ×•×ª ×”×–×•×œ×ª, ×©×§×•×œ ×›× ×’×“ ×’' ×¢×‘×™×¨×•×ª ×—××•×¨×•×ª." }
        ]}
    ];

    let counts = {};
    let fireworksActive = true;

    function init() {
        const root = document.getElementById('sin-list');
        categories.forEach(c => {
            const h = document.createElement('div'); h.className = 'category-title'; h.innerText = c.cat;
            root.appendChild(h);
            c.items.forEach(i => {
                counts[i.n] = 0;
                const div = document.createElement('div'); div.className = 'item';
                div.innerHTML = `<div><button class="info-btn" onclick="showInfo('${i.n}','${i.d}')">?</button> <strong>${i.n}</strong></div>
                    <div class="qty-controls"><button class="btn-qty" onclick="upd('${i.n}',-1)">-</button>
                    <span id="q-${i.n}">0</span><button class="btn-qty" onclick="upd('${i.n}',1)">+</button></div>`;
                root.appendChild(div);
            });
        });
        startFW();
    }

    function triggerEffects() {
        const ems = ['ğŸ”¥', 'ğŸ˜ˆ', '×—×˜×', 'ğŸ”¥'];
        const e = document.createElement('div'); e.className = 'falling-sin';
        e.innerText = ems[Math.floor(Math.random() * ems.length)];
        e.style.left = Math.random() * 100 + "vw";
        e.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(e);
        setTimeout(() => e.remove(), 4000);
        
        const snd = document.getElementById('fire-sound');
        snd.play().catch(() => {});
    }

    function upd(n, d) {
        if (d > 0) triggerEffects();
        counts[n] = Math.max(0, counts[n] + d);
        document.getElementById(`q-${n}`).innerText = counts[n];
        calc();
    }

    function calc() {
        let totalF = 0;
        categories.forEach(c => c.items.forEach(i => totalF += counts[i.n] * i.f));
        let price = totalF * 3;
        
        const cp = document.getElementById('coupon-field').value.trim().toUpperCase();
        if (cp === config.couponCode) price *= (1 - config.discount);

        document.getElementById('price-val').innerText = Math.floor(price).toLocaleString();

        const fire = document.getElementById('hell-overlay');
        const status = document.getElementById('soul-status');
        const snd = document.getElementById('fire-sound');

        if (totalF > 0) {
            fireworksActive = false;
            fire.style.height = Math.min(100, (totalF / 500) * 100) + "%";
            status.innerText = "ğŸ”¥ × ×©××” ×‘×¡×›× ×ª ×’×™×”× ×•×"; status.style.color = "#ef4444";
        } else {
            fireworksActive = true;
            fire.style.height = "0%"; status.innerText = "âœ¨ × ×©××” ×˜×”×•×¨×”"; status.style.color = "#10b981";
            snd.pause(); snd.currentTime = 0; startFW();
        }
    }

    function pay() { 
        const amount = document.getElementById('price-val').innerText.replace(/,/g, '');
        window.location.href = `${config.paymentUrl}?amount=${amount}`; 
    }

    async function shareAsImage() {
        const name = document.getElementById('user-name').value || "×¤×œ×•× ×™";
        document.getElementById('exp-name').innerText = name;
        document.getElementById('exp-price').innerText = document.getElementById('price-val').innerText;
        let listHtml = "<ul>";
        Object.keys(counts).forEach(k => { if(counts[k]>0) listHtml += `<li>${k}: ${counts[k]}</li>`; });
        document.getElementById('exp-list').innerHTML = listHtml + "</ul>";

        const canvas = await html2canvas(document.getElementById('export-source'));
        canvas.toBlob(async (blob) => {
            const f = new File([blob], 'pidyon.png', { type: 'image/png' });
            if (navigator.share) await navigator.share({ files: [f], title: '×¤×“×™×•×Ÿ ×ª×¢× ×™×•×ª', text: `×¡×“×¨ ×¤×“×™×•×Ÿ ×¢×‘×•×¨ ${name}` });
            else { const a = document.createElement('a'); a.download = 'pidyon.png'; a.href = URL.createObjectURL(blob); a.click(); }
        });
    }

    function showInfo(t, d) { 
        document.getElementById('m-title').innerText = t; 
        document.getElementById('m-desc').innerText = d; 
        document.getElementById('info-modal').style.display = 'block'; 
    }
    function closeModal() { document.getElementById('info-modal').style.display = 'none'; }

    function startFW() {
        if (!fireworksActive) return;
        const c = document.getElementById('fireworks-canvas'); const ctx = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        let p = [];
        function anim() {
            if (!fireworksActive) { ctx.clearRect(0,0,c.width,c.height); return; }
            ctx.clearRect(0,0,c.width,c.height);
            p.forEach((i,idx) => { i.x+=i.vx; i.y+=i.vy; i.a-=0.01; ctx.globalAlpha=i.a; ctx.fillStyle=i.c; ctx.beginPath(); ctx.arc(i.x,i.y,2,0,7); ctx.fill(); if(i.a<=0) p.splice(idx,1); });
            if(Math.random()<0.05) { const x=Math.random()*c.width, y=Math.random()*c.height/2; for(let k=0;k<15;k++) p.push({x,y,c:`hsl(${Math.random()*360},70%,50%)`,vx:(Math.random()-0.5)*5,vy:(Math.random()-0.5)*5,a:1}); }
            requestAnimationFrame(anim);
        }
        anim();
    }
    init();
</script>
</body>
</html>
